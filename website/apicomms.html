<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Connections ‚Äî Tiriwe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,600;0,9..144,700;1,9..144,400&display=swap" rel="stylesheet">
    <style>
        :root{--blue:#1F4788;--blue-dark:#162f5c;--blue-light:#2a5ba8;--blue-pale:#e8effa;--green:#2E7D32;--green-light:#43A047;--green-pale:#E8F5E9;--orange:#F59E0B;--orange-pale:#FFF8E1;--red:#DC2626;--red-pale:#FEF2F2;--purple:#7B1FA2;--purple-pale:#F3E5F5;--gold:#D4A017;--gold-pale:#FEF9E7;--gold-dark:#B8860B;--white:#ffffff;--off-white:#d5dfe9;--grey-50:#f8fafc;--grey-100:#f1f5f9;--grey-200:#e2e8f0;--grey-300:#cbd5e1;--grey-400:#94a3b8;--grey-500:#64748b;--grey-600:#475569;--grey-700:#334155;--grey-800:#1e293b;--text:#1e293b;--text-mid:#475569;--text-muted:#94a3b8;--border:#e2e8f0;--radius:14px;--radius-sm:8px;--shadow-sm:0 1px 3px rgba(0,0,0,0.06),0 1px 2px rgba(0,0,0,0.04);--shadow-md:0 4px 16px rgba(0,0,0,0.08);--shadow-lg:0 8px 30px rgba(0,0,0,0.12);}
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'DM Sans',-apple-system,sans-serif;color:var(--text);background:var(--off-white);line-height:1.6;min-height:100vh;}

        .top-bar{background:#e8edf3;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100;box-shadow:var(--shadow-sm);}
        .top-bar-upper{display:flex;align-items:center;justify-content:space-between;padding:0 24px;height:56px;}
        .nav-brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--blue);font-family:'Fraunces',serif;font-weight:700;font-size:22px;letter-spacing:-0.5px;}
        .nav-brand svg{width:30px;height:30px;}
        .nav-right{display:flex;align-items:center;gap:12px;}
        .nav-user{display:flex;align-items:center;gap:8px;}
        .nav-avatar{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,var(--gold-dark),var(--gold));display:flex;align-items:center;justify-content:center;font-size:15px;color:white;}
        .nav-display-name{font-weight:600;font-size:13px;color:var(--text);}
        .nav-btn{width:36px;height:36px;border-radius:50%;border:1px solid var(--border);background:var(--white);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s;color:var(--grey-500);font-size:16px;position:relative;text-decoration:none;}
        .nav-btn:hover{background:var(--grey-100);color:var(--blue);}
        .notif-badge{position:absolute;top:-2px;right:-2px;width:16px;height:16px;background:var(--red);color:white;font-size:9px;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid white;}
        .tab-nav{display:flex;align-items:center;padding:0 24px;overflow-x:auto;scrollbar-width:none;}
        .tab-nav::-webkit-scrollbar{display:none;}
        .tab-item{display:flex;align-items:center;gap:6px;padding:12px 18px;font-size:13px;font-weight:600;color:var(--grey-600);text-decoration:none;border-bottom:3px solid transparent;white-space:nowrap;transition:all 0.2s;}
        .tab-item:hover{color:var(--blue);background:var(--blue-pale);}
        .tab-item.active{color:var(--blue);border-bottom-color:var(--blue);}
        .tab-icon{font-size:16px;}.tab-badge{background:var(--red);color:white;font-size:10px;font-weight:700;padding:1px 6px;border-radius:10px;}

        .page-header{background:linear-gradient(135deg,var(--blue-dark) 0%,var(--blue) 50%,var(--blue-light) 100%);padding:24px 24px 20px;color:white;position:relative;overflow:hidden;}
        .page-header::before{content:'';position:absolute;top:-50%;right:-20%;width:500px;height:500px;background:radial-gradient(circle,rgba(255,255,255,0.06) 0%,transparent 70%);border-radius:50%;}
        .page-header-content{max-width:800px;margin:0 auto;position:relative;z-index:1;}
        .page-header h1{font-size:22px;font-weight:700;}
        .page-header p{font-size:13px;opacity:0.8;margin-top:2px;}

        .breadcrumb{max-width:800px;margin:16px auto 0;padding:0 24px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
        .breadcrumb a{font-size:13px;color:var(--blue);text-decoration:none;font-weight:600;display:flex;align-items:center;gap:4px;padding:6px 14px;background:var(--white);border:1px solid var(--border);border-radius:20px;transition:all 0.2s;}
        .breadcrumb a:hover{background:var(--blue);color:white;}

        .main{max-width:800px;margin:16px auto 0;padding:0 24px 40px;animation:fadeUp 0.5s ease-out;}
        @keyframes fadeUp{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}

        .section{background:var(--white);border-radius:var(--radius);box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:18px;overflow:hidden;}
        .section-hd{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;border-bottom:1px solid var(--grey-100);flex-wrap:wrap;gap:10px;}
        .section-title{font-size:15px;font-weight:700;display:flex;align-items:center;gap:8px;}
        .section-body{padding:20px;}
        .info-box{padding:14px 18px;border-radius:var(--radius-sm);font-size:13px;margin-bottom:16px;}
        .info-box.blue{background:var(--blue-pale);border:1px solid #c5d4ea;color:var(--blue-dark);}
        .info-box.gold{background:var(--gold-pale);border:1px solid #e8d48a;color:var(--gold-dark);}
        .info-box.green{background:var(--green-pale);border:1px solid #a5d6a7;color:var(--green);}

        /* PIONEER TIER GATE */
        .tier-gate{text-align:center;padding:40px 24px;background:var(--white);border-radius:var(--radius);border:2px dashed var(--gold);margin-bottom:18px;}
        .tier-gate-icon{font-size:48px;margin-bottom:12px;}
        .tier-gate h2{font-size:20px;font-weight:700;color:var(--gold-dark);margin-bottom:6px;}
        .tier-gate p{font-size:14px;color:var(--text-mid);max-width:420px;margin:0 auto 20px;}
        .tier-gate .btn-upgrade{background:linear-gradient(135deg,var(--gold-dark),var(--gold));color:white;padding:12px 32px;border-radius:var(--radius);font-size:14px;font-weight:700;border:none;cursor:pointer;font-family:inherit;transition:all 0.2s;box-shadow:0 2px 8px rgba(212,160,23,0.3);}
        .tier-gate .btn-upgrade:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(212,160,23,0.4);}
        .tier-gate-features{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:20px;}
        .tier-gate-feature{font-size:12px;padding:4px 12px;background:var(--gold-pale);border:1px solid #e8d48a;border-radius:12px;color:var(--gold-dark);font-weight:500;}

        /* DEVICE CARDS */
        .device-card{border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:14px;transition:all 0.2s;}
        .device-card:last-child{margin-bottom:0;}
        .device-card.connected{border-color:var(--green);background:linear-gradient(135deg,var(--green-pale),var(--white));}
        .device-card.coming-soon{opacity:0.55;pointer-events:none;}
        .device-header{display:flex;align-items:center;gap:14px;margin-bottom:16px;}
        .device-logo{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px;flex-shrink:0;}
        .device-logo.garmin{background:linear-gradient(135deg,#1a1a2e,#2d3047);color:white;}
        .device-logo.spot{background:linear-gradient(135deg,#f57c00,#ff9800);color:white;}
        .device-logo.zoleo{background:linear-gradient(135deg,#1565c0,#42a5f5);color:white;}
        .device-logo.thuraya{background:linear-gradient(135deg,#00695c,#26a69a);color:white;}
        .device-logo.iridium{background:linear-gradient(135deg,#4a148c,#7c43bd);color:white;}
        .device-info{flex:1;}
        .device-name{font-size:16px;font-weight:700;}
        .device-desc{font-size:12px;color:var(--text-muted);margin-top:1px;}
        .device-status{display:flex;align-items:center;gap:6px;font-size:12px;font-weight:600;}
        .status-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
        .status-dot.green{background:var(--green);box-shadow:0 0 6px rgba(46,125,50,0.4);}
        .status-dot.grey{background:var(--grey-400);}
        .status-dot.orange{background:var(--orange);animation:pulse 2s infinite;}
        @keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.5;}}
        .status-text.green{color:var(--green);}
        .status-text.grey{color:var(--grey-400);}
        .status-text.orange{color:var(--orange);}
        .coming-badge{display:inline-block;padding:3px 10px;border-radius:10px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;background:var(--grey-200);color:var(--grey-500);}

        /* FORM FIELDS */
        .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
        .form-group{display:flex;flex-direction:column;gap:4px;}
        .form-group.full{grid-column:1/-1;}
        .form-label{font-size:11px;font-weight:600;color:var(--text-mid);text-transform:uppercase;letter-spacing:0.5px;}
        .form-input,.form-select{padding:9px 12px;border:1px solid var(--border);border-radius:var(--radius-sm);font-size:13px;font-family:inherit;background:var(--white);transition:border-color 0.2s;}
        .form-input:focus,.form-select:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(31,71,136,0.1);}
        .form-input:disabled{background:var(--grey-50);color:var(--text-muted);}
        .form-hint{font-size:11px;color:var(--text-muted);line-height:1.4;}
        .form-input-with-prefix{display:flex;align-items:stretch;}
        .form-prefix{padding:9px 12px;background:var(--grey-100);border:1px solid var(--border);border-right:none;border-radius:var(--radius-sm) 0 0 var(--radius-sm);font-size:12px;color:var(--text-mid);font-weight:500;white-space:nowrap;display:flex;align-items:center;}
        .form-input-with-prefix .form-input{border-radius:0 var(--radius-sm) var(--radius-sm) 0;flex:1;}

        /* TOGGLE */
        .toggle{position:relative;width:52px;height:28px;cursor:pointer;flex-shrink:0;}
        .toggle input{opacity:0;width:0;height:0;}
        .toggle-track{position:absolute;inset:0;background:var(--grey-300);border-radius:28px;transition:0.3s;}
        .toggle-track::before{content:'';position:absolute;width:22px;height:22px;left:3px;bottom:3px;background:white;border-radius:50%;transition:0.3s;box-shadow:0 1px 3px rgba(0,0,0,0.15);}
        .toggle input:checked+.toggle-track{background:var(--green);}
        .toggle input:checked+.toggle-track::before{transform:translateX(24px);}
        .toggle-sm{width:40px;height:22px;}
        .toggle-sm .toggle-track::before{width:16px;height:16px;}
        .toggle-sm input:checked+.toggle-track::before{transform:translateX(18px);}

        .toggle-row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--grey-100);}
        .toggle-row:last-child{border-bottom:none;}
        .toggle-label{font-size:13px;font-weight:600;}
        .toggle-desc{font-size:11px;color:var(--text-muted);margin-top:1px;}

        /* BUTTONS */
        .btn{padding:10px 24px;border-radius:var(--radius-sm);font-size:13px;font-weight:600;font-family:inherit;cursor:pointer;transition:all 0.2s;border:none;}
        .btn-sm{padding:6px 14px;font-size:12px;}
        .btn-primary{background:var(--green);color:white;}.btn-primary:hover{background:var(--green-light);}
        .btn-secondary{background:var(--white);color:var(--blue);border:1px solid var(--border);}.btn-secondary:hover{background:var(--blue-pale);}
        .btn-blue{background:var(--blue);color:white;}.btn-blue:hover{background:var(--blue-light);}
        .btn-danger{background:var(--red-pale);color:var(--red);border:1px solid transparent;}.btn-danger:hover{background:#fecaca;}
        .btn-row{display:flex;gap:10px;justify-content:flex-end;margin-top:20px;padding-top:16px;border-top:1px solid var(--grey-100);}

        /* TEST RESULT */
        .test-result{display:none;margin-top:12px;padding:12px 16px;border-radius:var(--radius-sm);font-size:13px;font-weight:500;animation:fadeIn 0.3s ease-out;}
        .test-result.success{display:block;background:var(--green-pale);border:1px solid #a5d6a7;color:var(--green);}
        .test-result.error{display:block;background:var(--red-pale);border:1px solid #ef9a9a;color:var(--red);}
        .test-result.loading{display:flex;align-items:center;gap:8px;background:var(--blue-pale);border:1px solid #c5d4ea;color:var(--blue);}
        @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
        @keyframes spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}
        .spinner{width:16px;height:16px;border:2px solid var(--blue-pale);border-top-color:var(--blue);border-radius:50%;animation:spin 0.8s linear infinite;}

        /* LAST POSITION */
        .last-position{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--grey-50);border:1px solid var(--border);border-radius:var(--radius-sm);margin-top:14px;}
        .last-position-icon{font-size:20px;}
        .last-position-info{flex:1;}
        .last-position-coords{font-size:13px;font-weight:600;font-family:'SF Mono',SFMono-Regular,Consolas,monospace;}
        .last-position-time{font-size:11px;color:var(--text-muted);}
        .last-position-link{font-size:12px;color:var(--blue);text-decoration:none;font-weight:600;}
        .last-position-link:hover{text-decoration:underline;}

        /* SETUP STEPS */
        .setup-steps{counter-reset:step;}
        .setup-step{position:relative;padding:0 0 16px 40px;border-left:2px solid var(--grey-200);margin-left:14px;}
        .setup-step:last-child{border-left:none;padding-bottom:0;}
        .setup-step::before{counter-increment:step;content:counter(step);position:absolute;left:-14px;top:0;width:28px;height:28px;border-radius:50%;background:var(--blue);color:white;font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;}
        .setup-step-title{font-size:13px;font-weight:700;margin-bottom:2px;}
        .setup-step-desc{font-size:12px;color:var(--text-mid);line-height:1.5;}
        .setup-step-desc a{color:var(--blue);text-decoration:none;font-weight:600;}
        .setup-step-desc a:hover{text-decoration:underline;}
        .setup-step-desc code{background:var(--grey-100);padding:1px 6px;border-radius:4px;font-size:11px;font-family:'SF Mono',SFMono-Regular,Consolas,monospace;}

        /* TOAST */
        .toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);padding:12px 24px;border-radius:var(--radius);font-size:14px;font-weight:600;z-index:300;display:none;animation:slideUp 0.3s ease-out;}
        .toast.success{background:var(--green);color:white;}
        .toast.error{background:var(--red);color:white;}
        @keyframes slideUp{from{opacity:0;transform:translateX(-50%) translateY(20px);}to{opacity:1;transform:translateX(-50%) translateY(0);}}

        /* SETTINGS PANEL */
        .settings-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.4);z-index:200;opacity:0;transition:opacity 0.3s;}
        .settings-overlay.open{display:block;opacity:1;}
        .settings-panel{position:fixed;top:0;right:-380px;width:360px;max-width:90vw;height:100vh;background:var(--white);box-shadow:var(--shadow-lg);z-index:201;transition:right 0.3s ease;overflow-y:auto;}
        .settings-panel.open{right:0;}
        .settings-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;background:var(--white);z-index:1;}
        .settings-header h2{font-size:16px;font-weight:700;}
        .settings-close{width:32px;height:32px;border-radius:50%;border:none;background:var(--grey-100);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;color:var(--grey-500);}
        .settings-section{padding:12px 20px;}
        .settings-section-title{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted);margin-bottom:6px;}
        .settings-item{display:flex;align-items:center;gap:10px;padding:10px 0;cursor:pointer;border-bottom:1px solid var(--grey-100);text-decoration:none;color:var(--text);font-size:13px;font-weight:500;transition:color 0.15s;}
        .settings-item:last-child{border-bottom:none;}.settings-item:hover{color:var(--blue);}
        .si-icon{width:32px;height:32px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0;}
        .si-icon.green{background:var(--green-pale);}.si-icon.red{background:var(--red-pale);}
        .si-icon.blue{background:var(--blue-pale);}.si-icon.orange{background:var(--orange-pale);}
        .si-icon.purple{background:var(--purple-pale);}.si-icon.grey{background:var(--grey-100);}
        .si-icon.gold{background:var(--gold-pale);}
        .si-arrow{margin-left:auto;color:var(--grey-300);}
        .si-badge{background:var(--orange);color:white;font-size:10px;font-weight:700;padding:1px 7px;border-radius:10px;margin-left:auto;}
        .settings-logout{display:flex;align-items:center;justify-content:center;gap:6px;width:calc(100% - 40px);margin:12px 20px 20px;padding:12px;background:var(--red-pale);color:var(--red);border:none;border-radius:var(--radius);font-size:14px;font-weight:600;font-family:inherit;cursor:pointer;}
        .settings-logout:hover{background:#fecaca;}

        @media(max-width:768px){
            .nav-display-name{display:none;}
            .tab-item{padding:10px 12px;font-size:12px;}
            .form-grid{grid-template-columns:1fr;}
            .device-header{flex-wrap:wrap;}
            .setup-step{padding-left:32px;}
        }
    </style>
</head>
<body>

<!-- TOP BAR -->
<header class="top-bar">
    <div class="top-bar-upper">
        <a href="dashboard.html" class="nav-brand">
            <svg viewBox="0 0 32 32" fill="none"><circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2.5"/><circle cx="11" cy="13" r="3" fill="currentColor"/><circle cx="21" cy="13" r="3" fill="currentColor"/><path d="M11 16 L16 22 L21 16" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
            Tiriwe
        </a>
        <div class="nav-right">
            <div class="nav-user"><div class="nav-avatar">üèçÔ∏è</div><span class="nav-display-name">BraveRiver472</span></div>
            <a class="nav-btn" href="friends.html" title="My Friends">üë•<span class="notif-badge" style="background:var(--blue);">4</span></a>
            <a class="nav-btn" href="groups.html" title="My Groups">üë™</a>
            <button class="nav-btn" title="Notifications">üîî<span class="notif-badge">3</span></button>
            <button class="nav-btn" title="Settings" onclick="openSettings()">‚öôÔ∏è</button>
        </div>
    </div>
    <nav class="tab-nav">
        <a class="tab-item" href="dashboard.html"><span class="tab-icon">üè†</span><span class="tab-text">Dashboard</span></a>
        <a class="tab-item" href="messages.html"><span class="tab-icon">üí¨</span><span class="tab-text">Messages</span><span class="tab-badge">2</span></a>
        <a class="tab-item" href="diary.html"><span class="tab-icon">üìî</span><span class="tab-text">Diary</span></a>
        <a class="tab-item" href="findit.html"><span class="tab-icon">üîç</span><span class="tab-text">Find It</span></a>
        <a class="tab-item" href="logit.html"><span class="tab-icon">üìç</span><span class="tab-text">Log It</span></a>
    </nav>
</header>

<!-- PAGE HEADER -->
<div class="page-header">
    <div class="page-header-content">
        <h1>üì° Device Connections</h1>
        <p>Link your satellite communicators and tracking devices to enhance safety when you're off-grid</p>
    </div>
</div>

<!-- BREADCRUMB -->
<div class="breadcrumb">
    <a href="dashboard.html">üè† Dashboard</a>
    <a href="#" onclick="openSettings();return false;">‚öôÔ∏è Settings</a>
    <a href="apicomms.html" style="background:var(--blue);color:white;border-color:var(--blue);">üì° Device Connections</a>
</div>

<div class="main">

    <!-- PIONEER TIER INFO -->
    <div class="info-box gold" style="display:flex;align-items:center;gap:12px;">
        <span style="font-size:20px;">üèÜ</span>
        <div>
            <strong>Pioneer Feature</strong> ‚Äî Device connections are available on the Pioneer plan. Your connected devices integrate directly with Tiriwe's SOS system for enhanced off-grid safety.
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         GARMIN inReach ‚Äî FULLY BUILT
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-hd">
            <div class="section-title">üì° Garmin inReach</div>
            <div class="device-status">
                <span class="status-dot green"></span>
                <span class="status-text green" id="garmin-status-text">Connected</span>
            </div>
        </div>
        <div class="section-body">
            <div class="device-card connected" id="garmin-card">
                <div class="device-header">
                    <div class="device-logo garmin">üì°</div>
                    <div class="device-info">
                        <div class="device-name">Garmin inReach Mini 2</div>
                        <div class="device-desc">Satellite communicator with two-way messaging, location tracking, and SOS via Iridium network</div>
                    </div>
                </div>

                <!-- MapShare Configuration -->
                <div class="form-grid" style="margin-bottom:16px;">
                    <div class="form-group full">
                        <label class="form-label">MapShare URL</label>
                        <div class="form-input-with-prefix">
                            <span class="form-prefix">share.garmin.com/</span>
                            <input class="form-input" type="text" value="BraveRiver472" id="garmin-mapshare" placeholder="YourMapShareName">
                        </div>
                        <span class="form-hint">Your MapShare identifier from <a href="https://explore.garmin.com" target="_blank" style="color:var(--blue);">Garmin Explore</a> ‚Üí Social ‚Üí MapShare</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">MapShare Password</label>
                        <input class="form-input" type="password" value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" id="garmin-password" placeholder="If password-protected">
                        <span class="form-hint">Leave blank if MapShare is public</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Device IMEI</label>
                        <input class="form-input" type="text" value="300434012345678" id="garmin-imei" placeholder="15-digit IMEI">
                        <span class="form-hint">Found in device settings or on device label</span>
                    </div>
                </div>

                <!-- Test Connection -->
                <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                    <button class="btn btn-blue btn-sm" onclick="testGarminConnection()">üîÑ Test Connection</button>
                    <button class="btn btn-secondary btn-sm" onclick="viewOnMap()">üó∫Ô∏è View on Map</button>
                </div>
                <div class="test-result success" id="garmin-test-result">
                    ‚úÖ Connection successful ‚Äî Last position received 12 mins ago
                </div>

                <!-- Last Known Position -->
                <div class="last-position" id="garmin-last-pos">
                    <div class="last-position-icon">üìç</div>
                    <div class="last-position-info">
                        <div class="last-position-coords">-42.4008, 173.6810</div>
                        <div class="last-position-time">Last update: 13 Feb 2026, 8:47 AM ‚Äî 12 mins ago</div>
                    </div>
                    <a href="#" class="last-position-link" onclick="viewOnMap();return false;">View ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

    <!-- TRACKING SETTINGS -->
    <div class="section">
        <div class="section-hd">
            <div class="section-title">‚è±Ô∏è Tracking Settings</div>
        </div>
        <div class="section-body">
            <div class="form-grid" style="margin-bottom:16px;">
                <div class="form-group">
                    <label class="form-label">Tracking Interval</label>
                    <select class="form-select" id="garmin-interval">
                        <option value="2">Every 2 minutes</option>
                        <option value="5">Every 5 minutes</option>
                        <option value="10" selected>Every 10 minutes</option>
                        <option value="30">Every 30 minutes</option>
                        <option value="60">Every 60 minutes</option>
                    </select>
                    <span class="form-hint">How often Tiriwe pulls your position from MapShare. More frequent = faster SOS response but higher Garmin plan usage.</span>
                </div>
                <div class="form-group">
                    <label class="form-label">Stale Data Timeout</label>
                    <select class="form-select" id="garmin-stale">
                        <option value="30">30 minutes</option>
                        <option value="60" selected>1 hour</option>
                        <option value="120">2 hours</option>
                        <option value="360">6 hours</option>
                    </select>
                    <span class="form-hint">Position shown as "stale" if no update received within this window</span>
                </div>
            </div>

            <div style="border-top:1px solid var(--grey-100);padding-top:14px;">
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Auto-share location during SOS</div>
                        <div class="toggle-desc">Automatically share your inReach position with helpers when you trigger an SOS alert</div>
                    </div>
                    <label class="toggle toggle-sm"><input type="checkbox" checked><span class="toggle-track"></span></label>
                </div>
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Show satellite position on profile</div>
                        <div class="toggle-desc">Display your last known satellite position on your public profile (respects Location Privacy settings)</div>
                    </div>
                    <label class="toggle toggle-sm"><input type="checkbox"><span class="toggle-track"></span></label>
                </div>
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Emergency contact sync</div>
                        <div class="toggle-desc">Keep your Tiriwe ICE contacts in sync with your Garmin emergency contacts</div>
                    </div>
                    <label class="toggle toggle-sm"><input type="checkbox" checked><span class="toggle-track"></span></label>
                </div>
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Fallback to satellite when offline</div>
                        <div class="toggle-desc">If Tiriwe can't reach you via cellular, automatically attempt contact via inReach messaging</div>
                    </div>
                    <label class="toggle toggle-sm"><input type="checkbox" checked><span class="toggle-track"></span></label>
                </div>
                <div class="toggle-row">
                    <div>
                        <div class="toggle-label">Include inReach SOS in Tiriwe alerts</div>
                        <div class="toggle-desc">If your inReach device triggers an SOS, also notify nearby Tiriwe helpers</div>
                    </div>
                    <label class="toggle toggle-sm"><input type="checkbox" checked><span class="toggle-track"></span></label>
                </div>
            </div>
        </div>
    </div>

    <!-- SOS INTEGRATION -->
    <div class="section">
        <div class="section-hd">
            <div class="section-title">üÜò SOS Integration</div>
        </div>
        <div class="section-body">
            <div class="info-box blue">
                <strong>How it works:</strong> When you trigger an SOS through Tiriwe, your satellite device position is shared with responding helpers. If your inReach detects an SOS activation, Tiriwe can simultaneously alert nearby community members ‚Äî giving you both professional rescue services <em>and</em> local community support.
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">SOS Position Sharing</label>
                    <select class="form-select">
                        <option selected>Share with all responding helpers</option>
                        <option>Share with verified helpers only</option>
                        <option>Share with friends only</option>
                        <option>Don't share satellite position</option>
                    </select>
                    <span class="form-hint">Controls who sees your satellite position during an SOS event</span>
                </div>
                <div class="form-group">
                    <label class="form-label">Dual-SOS Behaviour</label>
                    <select class="form-select">
                        <option selected>Auto-alert Tiriwe when inReach SOS fires</option>
                        <option>Notify me first, I'll confirm</option>
                        <option>Keep systems independent</option>
                    </select>
                    <span class="form-hint">What happens when you press SOS on the physical device</span>
                </div>
            </div>
        </div>
    </div>

    <!-- SETUP GUIDE -->
    <div class="section">
        <div class="section-hd">
            <div class="section-title">üìñ Setup Guide ‚Äî Garmin inReach</div>
            <button class="btn btn-secondary btn-sm" onclick="this.closest('.section').querySelector('.section-body').classList.toggle('collapsed')" style="font-size:11px;">Show / Hide</button>
        </div>
        <div class="section-body">
            <div class="setup-steps">
                <div class="setup-step">
                    <div class="setup-step-title">Enable MapShare on your Garmin</div>
                    <div class="setup-step-desc">Log in to <a href="https://explore.garmin.com" target="_blank">explore.garmin.com</a> ‚Üí click <strong>Social</strong> ‚Üí toggle <strong>MapShare: On</strong> (green button).</div>
                </div>
                <div class="setup-step">
                    <div class="setup-step-title">Set a MapShare password (recommended)</div>
                    <div class="setup-step-desc">On the MapShare Settings page, set a password. This prevents anyone with your URL from tracking you ‚Äî only Tiriwe will have access.</div>
                </div>
                <div class="setup-step">
                    <div class="setup-step-title">Copy your MapShare URL</div>
                    <div class="setup-step-desc">Your MapShare link will be <code>share.garmin.com/YourName</code>. Enter just the <code>YourName</code> part in the field above.</div>
                </div>
                <div class="setup-step">
                    <div class="setup-step-title">Get your Raw KML Feed URL</div>
                    <div class="setup-step-desc">On the MapShare page, click the tiny <strong>Feeds</strong> link next to your URL. Copy the <strong>Raw KML Data</strong> link ‚Äî this is what Tiriwe uses to pull your position. The feed URL follows the pattern <code>share.garmin.com/Feed/Share/YourName</code>.</div>
                </div>
                <div class="setup-step">
                    <div class="setup-step-title">Find your device IMEI</div>
                    <div class="setup-step-desc">On your inReach device: <strong>Settings ‚Üí About This Device ‚Üí IMEI</strong>. Or check the label on the back of the unit. Enter the 15-digit number above.</div>
                </div>
                <div class="setup-step">
                    <div class="setup-step-title">Test the connection</div>
                    <div class="setup-step-desc">Click <strong>Test Connection</strong> above. Tiriwe will attempt to pull your latest position from the KML feed. If successful, you'll see your coordinates and a timestamp.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         OTHER DEVICES ‚Äî COMING SOON
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-hd">
            <div class="section-title">üîÆ More Devices</div>
            <span class="coming-badge">Coming Soon</span>
        </div>
        <div class="section-body">
            <p style="font-size:13px;color:var(--text-mid);margin-bottom:16px;">We're working on integrations for more satellite communicators and tracking devices. Want us to prioritise one? Let us know!</p>

            <div class="device-card coming-soon">
                <div class="device-header" style="margin-bottom:0;">
                    <div class="device-logo spot">üì°</div>
                    <div class="device-info">
                        <div class="device-name">SPOT Gen4 / SPOT X</div>
                        <div class="device-desc">Globalstar satellite tracking and SOS messaging</div>
                    </div>
                    <span class="coming-badge">Planned</span>
                </div>
            </div>

            <div class="device-card coming-soon">
                <div class="device-header" style="margin-bottom:0;">
                    <div class="device-logo zoleo">üì°</div>
                    <div class="device-info">
                        <div class="device-name">ZOLEO Satellite Communicator</div>
                        <div class="device-desc">Iridium satellite with smartphone app pairing</div>
                    </div>
                    <span class="coming-badge">Planned</span>
                </div>
            </div>

            <div class="device-card coming-soon">
                <div class="device-header" style="margin-bottom:0;">
                    <div class="device-logo thuraya">üì°</div>
                    <div class="device-info">
                        <div class="device-name">Thuraya Satellite Phone</div>
                        <div class="device-desc">GEO satellite voice and data communication</div>
                    </div>
                    <span class="coming-badge">Planned</span>
                </div>
            </div>

            <div class="device-card coming-soon">
                <div class="device-header" style="margin-bottom:0;">
                    <div class="device-logo iridium">üì°</div>
                    <div class="device-info">
                        <div class="device-name">Iridium GO! / GO! exec</div>
                        <div class="device-desc">Global satellite hotspot for voice, data, and tracking</div>
                    </div>
                    <span class="coming-badge">Planned</span>
                </div>
            </div>

            <div style="margin-top:16px;text-align:center;">
                <button class="btn btn-secondary btn-sm" onclick="alert('Feature request sent ‚Äî thanks!')">üí° Request a Device Integration</button>
            </div>
        </div>
    </div>

    <!-- SAVE -->
    <div class="btn-row" style="border-top:none;padding-top:0;">
        <button class="btn btn-danger btn-sm" onclick="disconnectGarmin()">Disconnect Garmin</button>
        <button class="btn btn-secondary" onclick="window.location.href='dashboard.html'">Cancel</button>
        <button class="btn btn-primary" onclick="saveDeviceSettings()">üíæ Save Settings</button>
    </div>

</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- SETTINGS PANEL -->
<div class="settings-overlay" id="settings-overlay" onclick="closeSettings()"></div>
<aside class="settings-panel" id="settings-panel">
    <div class="settings-header"><h2>Settings</h2><button class="settings-close" onclick="closeSettings()">‚úï</button></div>
    <div class="settings-section">
        <div class="settings-section-title">Profile</div>
        <a class="settings-item" href="profile.html"><div class="si-icon green">üë§</div> My Profile <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="friends.html"><div class="si-icon blue">üë•</div> My Friends <span class="si-badge">4</span></a>
        <a class="settings-item" href="groups.html"><div class="si-icon purple">üë™</div> My Groups <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="transport.html"><div class="si-icon orange">üèçÔ∏è</div> My Transport <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="emergency.html"><div class="si-icon red">‚ù§Ô∏è</div> In Case of Emergency <span class="si-arrow">‚Ä∫</span></a>
    </div>
    <div class="settings-section">
        <div class="settings-section-title">Account</div>
        <a class="settings-item" href="subscription.html"><div class="si-icon orange">‚≠ê</div> Subscription & Plan <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="password.html"><div class="si-icon grey">üîë</div> Change Password <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="twofactor.html"><div class="si-icon blue">üîí</div> Two-Factor Auth <span class="si-arrow">‚Ä∫</span></a>
    </div>
    <div class="settings-section">
        <div class="settings-section-title">Availability</div>
        <a class="settings-item" href="availability.html"><div class="si-icon green">üì°</div> Availability & Help <span class="si-arrow">‚Ä∫</span></a>
    </div>
    <div class="settings-section">
        <div class="settings-section-title">Devices</div>
        <a class="settings-item" href="apicomms.html" style="color:var(--blue);font-weight:700;"><div class="si-icon gold">üì°</div> Device Connections <span style="font-size:10px;padding:2px 8px;border-radius:8px;background:var(--gold-pale);color:var(--gold-dark);font-weight:700;margin-left:auto;">Pioneer</span></a>
    </div>
    <div class="settings-section">
        <div class="settings-section-title">Activity</div>
        <a class="settings-item" href="activity.html"><div class="si-icon blue">üìã</div> Activity History <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="feedback.html"><div class="si-icon orange">‚è≥</div> Pending Feedback <span class="si-badge">2</span></a>
    </div>
    <div class="settings-section">
        <div class="settings-section-title">Privacy & Data</div>
        <a class="settings-item" href="privacy.html"><div class="si-icon purple">üìç</div> Location Privacy <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="retention.html"><div class="si-icon grey">üóÇÔ∏è</div> Data Retention <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="download.html"><div class="si-icon blue">‚¨áÔ∏è</div> Download My Data <span class="si-arrow">‚Ä∫</span></a>
        <a class="settings-item" href="blocked.html"><div class="si-icon red">üö´</div> Blocked Users <span class="si-arrow">‚Ä∫</span></a>
    </div>
    <button class="settings-logout" onclick="alert('Logged out')">üö™ Log Out</button>
</aside>

<script>
    function openSettings() { document.getElementById('settings-overlay').classList.add('open'); document.getElementById('settings-panel').classList.add('open'); document.body.style.overflow='hidden'; }
    function closeSettings() { document.getElementById('settings-overlay').classList.remove('open'); document.getElementById('settings-panel').classList.remove('open'); document.body.style.overflow=''; }

    function showToast(msg, type) {
        var t = document.getElementById('toast');
        t.textContent = msg;
        t.className = 'toast ' + type;
        t.style.display = 'block';
        setTimeout(function() { t.style.display = 'none'; }, 3000);
    }

    function testGarminConnection() {
        var result = document.getElementById('garmin-test-result');
        var mapshare = document.getElementById('garmin-mapshare').value.trim();

        if (!mapshare) {
            result.className = 'test-result error';
            result.innerHTML = '‚ùå Please enter your MapShare URL identifier first';
            return;
        }

        // Show loading
        result.className = 'test-result loading';
        result.innerHTML = '<div class="spinner"></div> Testing connection to share.garmin.com/Feed/Share/' + mapshare + '...';

        // Simulate API test
        setTimeout(function() {
            result.className = 'test-result success';
            result.innerHTML = '‚úÖ Connection successful ‚Äî Last position received 12 mins ago<br><span style="font-size:11px;color:var(--text-mid);">Feed URL: share.garmin.com/Feed/Share/' + mapshare + '</span>';

            // Update status
            document.getElementById('garmin-status-text').textContent = 'Connected';
            document.getElementById('garmin-status-text').className = 'status-text green';
            document.querySelector('.status-dot').className = 'status-dot green';
            document.getElementById('garmin-card').classList.add('connected');
        }, 2000);
    }

    function viewOnMap() {
        alert('Opens map centred on last known satellite position:\n-42.4008, 173.6810\n(Kaikoura area)\n\nWhen wired: will open dashboard map or a dedicated tracking view.');
    }

    function disconnectGarmin() {
        if (confirm('Disconnect your Garmin inReach?\n\nThis will stop Tiriwe from accessing your satellite position. You can reconnect anytime.')) {
            document.getElementById('garmin-mapshare').value = '';
            document.getElementById('garmin-password').value = '';
            document.getElementById('garmin-imei').value = '';
            document.getElementById('garmin-status-text').textContent = 'Not connected';
            document.getElementById('garmin-status-text').className = 'status-text grey';
            document.querySelector('.status-dot').className = 'status-dot grey';
            document.getElementById('garmin-card').classList.remove('connected');
            document.getElementById('garmin-test-result').className = 'test-result';
            document.getElementById('garmin-last-pos').style.display = 'none';
            showToast('Garmin inReach disconnected', 'error');
        }
    }

    function saveDeviceSettings() {
        var mapshare = document.getElementById('garmin-mapshare').value.trim();
        if (mapshare && !document.getElementById('garmin-imei').value.trim()) {
            showToast('Please enter your device IMEI', 'error');
            document.getElementById('garmin-imei').focus();
            return;
        }
        showToast('‚úÖ Device settings saved', 'success');
    }
</script>

</body>
</html>
